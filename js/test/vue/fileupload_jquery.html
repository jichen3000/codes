<!DOCTYPE html> 
<html> 
<body>


<div id="demo">
  <input v-uploader type="file" name="file" />
  <div class="text" v-text="message"></div>
</div>

  <script src='https://code.jquery.com/jquery-1.12.4.js' type='text/javascript'></script>
  <script src="https://unpkg.com/vue@2.5.16/dist/vue.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/9.5.7/jquery.fileupload.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/9.5.7/jquery.iframe-transport.js"></script>
  <script> 
  // <input v-uploader="uploader" type="file" name="file" accept="image/*" />

// Init the file uploader, and binding events.
// function uploaderBind(el, binding, vnode) {
//   // var vm = this.vm;
//   // console.log("bind");
//   // console.log(vm);
//   // vm.uploaderId = "#" + this.expression;

//   // var $el = $(this.el);
//   // $el.attr("id", this.expression);
//   var cur_el = $(el);
//   console.log(cur_el);
//   var options = {
//     url: "/api/v1/fgt_config_file",
//     // singleFileUploads: true,
//     // paramName: "file",
//     // sequentialUploads: true,
//     formData: {}
//   };
//   var uploader = cur_el.fileupload(options);

//   uploader.on("fileuploadadd", function(evt, data) {
//     console.log("Add file");
//   });

//   uploader.on("fileuploadstart", function(evt, data) {
//     console.log("upload start");
//   });

//   uploader.on("fileuploaddone", function(evt, data) {
//     console.log("upload done");
//   });

//   uploader.on("fileuploadfail", function(evt, data) {
//     console.log("upload failed");
//   });

//   uploader.on("fileuploadchange", function(evt, data) {
//     console.log("change");
//   });
// }


var vm = new Vue({
  el: "#demo",
  data: {
    uploaderId: "",
    message: ""
  },
  methods: {
    log: function(msg) {
      this.message += "<p>" + msg + "</p>";
    },
    uploaderBind: function(el, binding, vnode) {
      // var vm = this.vm;
      // console.log("bind");
      // console.log(vm);
      // vm.uploaderId = "#" + this.expression;

      // var $el = $(this.el);
      // $el.attr("id", this.expression);
      var cur_el = $(el);
      console.log(cur_el);
      var options = {
        url: "/api/v1/fgt_config_file",
        // singleFileUploads: true,
        // paramName: "file",
        // sequentialUploads: true,
        formData: {}
      };
      var uploader = cur_el.fileupload(options);

      uploader.on("fileuploadadd", function(evt, data) {
        console.log("Add file");
      });

      uploader.on("fileuploadstart", function(evt, data) {
        console.log("upload start");
      });

      uploader.on("fileuploaddone", function(evt, data) {
        console.log("upload done");
      });

      uploader.on("fileuploadfail", function(evt, data) {
        console.log("upload failed");
      });

      uploader.on("fileuploadchange", function(evt, data) {
        console.log("change");
      });
    },
  },

  directives: {
    uploader: {
      bind: this.uploaderBind,
      unbind: function() {
        console.log("unbind");
      }
    }
  }
});

  </script> 
</body> 
</html>


